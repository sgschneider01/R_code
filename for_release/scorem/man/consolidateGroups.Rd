\name{consolidateGroups}
\alias{consolidateGroups}
%- Also NEED an '\alias' for EACH other topic documented here.
\title{
Consolidation of Concordant Probe Set Groups
}
\description{
Combines coefficients and p-values of an \code{MArrayLM} object using a data frame of concordant groups output by \code{makeGroups}.
}
\usage{
consolidateGroups(object, new.ids)
}
%- maybe also 'usage' for other objects documented here.
\arguments{
  \item{object}{
    \code{MArrayLM} object output from \code{\link[limma]{eBayes}}, containing the coefficients and p-values to be consolidated.
}
  \item{new.ids}{
   A data frame of probe set ids and new consolidated ids, generated by \code{\link{makeGroups}}.
}
}
\details{
%%  ~~ If necessary, more details than the description above ~~
}
\value{
  An \code{MArrayLM} object.
}

\references{
}
\author{
  Stephanie G. Schneider
}
\note{
}
\seealso{
\code{\link{makeGroups}},\code{\link[limma]{eBayes}}
}
\examples{
##---- Should be DIRECTLY executable !! ----
##-- ==>  Define data, use random,
##--	or do  help(data=index)  for the standard data sets.

## The function is currently defined as
function (object, new.ids)
{
  m <- object$coefficients  
  m <- subset(m,rownames(m) \%in\% new.ids$probe_id)  
  new.ids <- subset(new.ids, new.ids$probe_id \%in\% rownames(m))
  m <- data.frame(m[as.character(new.ids$probe_id),])
  m <- apply(m,2,function(x) tapply(x,as.character(new.ids$new.gene_id),mean))

  p <- object$p.value
  p <- subset(p,rownames(p) \%in\% new.ids$probe_id)  
  p <- data.frame(p[as.character(new.ids$probe_id),])
  p <- apply(p,2,function(x) tapply(x,as.character(new.ids$new.gene_id), fisher.p))

  object$coefficients <- m
  object$p.value <- p
  return(object)
  }
}
% Add one or more standard keywords, see file 'KEYWORDS' in the
% R documentation directory.
\keyword{ ~kwd1 }
\keyword{ ~kwd2 }% __ONLY ONE__ keyword per line
